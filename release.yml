version: 0.1.{build}.0
branches:
  only:
  - master
os: Visual Studio 2015 RC
configuration: Release
platform: Any CPU
shallow_clone: true
assembly_info:
  patch: true
  file: '**\AssemblyInfo.*'
  assembly_version: '{version}'
  assembly_file_version: '{version}'
  assembly_informational_version: '{version}'
install:
- ps: (new-object Net.WebClient).DownloadString("https://raw.github.com/madskristensen/ExtensionScripts/master/AppVeyor/vsix.ps1") | iex
nuget:
  account_feed: true
  project_feed: true
before_build:
- nuget restore soft.Hati.ErrorListSearchOn\soft.Hati.ErrorListSearchOn.sln
- rd "C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\IDE\Extensions\Amazon Web Services LLC" /s /q
- ps: Vsix-IncrementVsixVersion | Vsix-UpdateBuildVersion
build:
  project: soft.Hati.ErrorListSearchOn\soft.Hati.ErrorListSearchOn.sln
  verbosity: minimal
after_test:
- ps: Vsix-PushArtifacts | Vsix-PublishToGallery
